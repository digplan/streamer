<!DOCTYPE html>
 <html>
 <head>
  <title>Live Camera Stream</title>
  <style>
  body, html {
  margin: 0;
  padding: 0;
  height: 100%;
  width: 100%;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  background-color: black;
  }
  #video {
  max-width: 100%;
  max-height: 80vh;
  object-fit: contain;
  }
  </style>
 </head>
 <body>

  <video id="video" autoplay playsinline></video>

  <script>
  const video = document.getElementById('video');
  const streamServerURL = 'YOUR_STREAM_SERVER_URL'; // Replace with your server endpoint

  async function streamVideo(stream) {
  const mediaRecorder = new MediaRecorder(stream, {
  mimeType: 'video/webm;codecs=vp8,opus',
  });

  mediaRecorder.ondataavailable = async (event) => {
  if (event.data.size > 0) {
  try {
  await fetch(streamServerURL, {
  method: 'POST',
  body: event.data,
  headers: {
  'Content-Type': 'video/webm',
  },
  });
  } catch (error) {
  console.error('Error sending stream:', error);
  }
  }
  };

  mediaRecorder.start(1000); // Send data every 1 second (adjust as needed)

  mediaRecorder.onstop = () => {
  console.log('Streaming stopped');
  };

  return mediaRecorder;
  }

  async function startCamera() {
  try {
  const stream = await navigator.mediaDevices.getUserMedia({ video: { width: 1280, height: 720 }, audio: true });
  video.srcObject = stream;
  video.onloadedmetadata = () => {
  video.play();
  };

  const mediaRecorder = await streamVideo(stream);


  window.addEventListener('beforeunload', () => {
  mediaRecorder.stop();
  });
  } catch (err) {
  console.error("Error accessing camera:", err);
  }
  }

  startCamera();
  </script>

 </body>
 </html>
